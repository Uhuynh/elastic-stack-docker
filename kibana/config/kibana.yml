---
## Default Kibana configuration from Kibana base image.
## https://github.com/elastic/kibana/blob/master/src/dev/build/tasks/os_packages/docker_generator/templates/kibana_yml.template.ts
#
server.name: kibana
server.host: 0.0.0.0

# Elasticsearch Connection
elasticsearch.hosts:
  - ${ES_HOST}

monitoring.ui.container.elasticsearch.enabled: true

## X-Pack security credentials
elasticsearch.username: kibana_system
elasticsearch.password: ${KIBANA_SYSTEM_PASSWORD}

## Communications between Kibana and Elasticsearch
## see https://www.elastic.co/guide/en/kibana/current/configuring-tls.html#configuring-tls-kib-es
#
elasticsearch.ssl.certificateAuthorities: config/certs/ca/ca.crt

## Encrypt traffic between Kibana and browser
## see https://www.elastic.co/guide/en/elasticsearch/reference/current/security-basic-setup-https.html#encrypt-kibana-browser

server.ssl.enabled: true
server.ssl.certificate: config/certs/kibana/kibana.crt
server.ssl.key: config/certs/kibana/kibana.key

## activate Kibana alerts feature
xpack.encryptedSavedObjects.encryptionKey: ${KIBANA_XPACK_ENCRYPTEDSAVEDOBJECTS_ENCRYPTIONKEY}
xpack.actions.preconfiguredAlertHistoryEsIndex: true

## configuration for production environment
#server.publicBaseUrl: https://elk.cloud.dje-intern.de:14000
server.publicBaseUrl: https://elk.cloud.dje-intern.de

## saml configuration
xpack.security.authc.providers:
  saml.saml1:
    order: 0
    realm: "saml1"
    description: "Log in with Azure AD"
  basic.basic1:
    order: 1


# enable reporting feature (generate csv, pdf, ...)
# https://www.elastic.co/guide/en/kibana/current/reporting-settings-kb.html#general-reporting-settings
xpack.reporting.enabled: true
xpack.reporting.encryptionKey: ${KIBANA_XPACK_REPORTING_ENCRYPTIONKEY}
xpack.reporting.capture.browser.chromium.disableSandbox: true